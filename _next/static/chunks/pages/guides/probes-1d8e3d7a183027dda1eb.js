_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[12],{LSgu:function(e,t,n){"use strict";n.r(t),n.d(t,"meta",(function(){return c})),n.d(t,"default",(function(){return m}));var a=n("wx14"),r=n("Ff2n"),i=n("q1tI"),o=n.n(i),b=n("7ljp"),l=n("er9C"),c=(o.a.createElement,{}),s={meta:c},p=function(e){var t=e.children,n=Object(r.a)(e,["children"]);return Object(b.b)(l.a,Object(a.a)({meta:c},n),t)};function m(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(b.b)(p,Object(a.a)({},s,n,{components:t,mdxType:"MDXLayout"}),Object(b.b)("h1",{id:"probes"},"Probes",Object(b.b)("a",{parentName:"h1",href:"#probes",title:"Direct link to heading",className:"anchor"},Object(b.b)("span",{parentName:"a",className:"icon icon-link"}))),Object(b.b)("p",null,"Probes are the heart of the monitoring requests. Probes are just arrays of request objects defined in the config file ",Object(b.b)("inlineCode",{parentName:"p"},"config.json")," like so."),Object(b.b)("pre",null,Object(b.b)("code",{parentName:"pre",className:"language-json"},'  "probes": [\n    {\n      "id": "1",\n      "name": "Name of the probe",\n      "description": "Probe to check GET time",\n      "request": { },\n      "alerts": []\n    },\n    {\n      "id": "2",\n      "name": "Name of the probe 2",\n      "description": "Probe to check GET health",\n      "request": { },\n      "alerts": []\n    }\n  ]\n')),Object(b.b)("p",null,"Monica goes through each probe object, sends it out, and determines whether an alert or notification need to be sent out."),Object(b.b)("h2",{id:"request-anatomy"},"Request Anatomy",Object(b.b)("a",{parentName:"h2",href:"#request-anatomy",title:"Direct link to heading",className:"anchor"},Object(b.b)("span",{parentName:"a",className:"icon icon-link"}))),Object(b.b)("p",null,"An actual probe request may be something like below."),Object(b.b)("pre",null,Object(b.b)("code",{parentName:"pre",className:"language-json"},'  "probes": [\n    {\n      "id": "1",\n      "name": "Example: get Time",\n      "description": "Probe",\n      "request": {\n        "method": "POST",\n        "url": "https://mybackend.org/user/login",\n        "timeout": 7000,\n        "headers": {\n          "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkhlbGxvIGZyb20gSHlwZXJqdW1wIiwiaWF0IjoxNTE2MjM5MDIyfQ.T2SbP1G39CMD4MMfkOZYGFgNIQgNkyi0sPdiFi_DfVA"\n        },\n        "body": {\n          "username": "someusername",\n          "password": "somepassword"\n        }\n      },\n      "alerts": ["status-not-2xx", "response-time-greater-than-200-ms"]\n    },\n  ]\n')),Object(b.b)("table",null,Object(b.b)("thead",{parentName:"table"},Object(b.b)("tr",{parentName:"thead"},Object(b.b)("th",{parentName:"tr",align:"left"},"Topic"),Object(b.b)("th",{parentName:"tr",align:null},"Description"))),Object(b.b)("tbody",{parentName:"table"},Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",{parentName:"tr",align:"left"},"method"),Object(b.b)("td",{parentName:"tr",align:null},"Http method such as GET, POST, PUT, DELETE")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",{parentName:"tr",align:"left"},"url"),Object(b.b)("td",{parentName:"tr",align:null},"This is the url endpoint to dispatch the request to")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",{parentName:"tr",align:"left"},"timeout"),Object(b.b)("td",{parentName:"tr",align:null},"Request timeout, after which time, will assume timeout")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",{parentName:"tr",align:"left"},"headers"),Object(b.b)("td",{parentName:"tr",align:null},"Your http header")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",{parentName:"tr",align:"left"},"body"),Object(b.b)("td",{parentName:"tr",align:null},"Any http body if your method requires it")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",{parentName:"tr",align:"left"}),Object(b.b)("td",{parentName:"tr",align:null})))),Object(b.b)("p",null,"Alerts are the condition which will trigger an alert, and the subsequent notification method to send out the alert. See below for further details on alerts and notifications."),Object(b.b)("h2",{id:"execution-order"},"Execution order",Object(b.b)("a",{parentName:"h2",href:"#execution-order",title:"Direct link to heading",className:"anchor"},Object(b.b)("span",{parentName:"a",className:"icon icon-link"}))),Object(b.b)("p",null,"In a configuration with multiple probes, ",Object(b.b)("inlineCode",{parentName:"p"},"Monika")," will perform the requests in sequence in the order that they are written down, one after another."),Object(b.b)("p",null,"On completion, ",Object(b.b)("inlineCode",{parentName:"p"},"Monika")," will sleep until the next interval to start again. At the top of the ",Object(b.b)("inlineCode",{parentName:"p"},"config.json")," file there is an ",Object(b.b)("inlineCode",{parentName:"p"},"interval")," setting. The execution will be restarted after every ",Object(b.b)("inlineCode",{parentName:"p"},"interval"),". If interval is shorter than the amount of time to dispatch all the requests, then then ",Object(b.b)("inlineCode",{parentName:"p"},"monika")," will immediately repeat after the last probe response and any notification alerts sent."),Object(b.b)("h2",{id:"further-reading"},"Further reading",Object(b.b)("a",{parentName:"h2",href:"#further-reading",title:"Direct link to heading",className:"anchor"},Object(b.b)("span",{parentName:"a",className:"icon icon-link"}))),Object(b.b)("ol",null,Object(b.b)("li",{parentName:"ol"},Object(b.b)("a",{parentName:"li",href:"./alerts.md"},"Alerts")),Object(b.b)("li",{parentName:"ol"},Object(b.b)("a",{parentName:"li",href:"./notifications.md"},"Notifications"))))}m.isMDXComponent=!0},nDaH:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/guides/probes",function(){return n("LSgu")}])}},[["nDaH",0,2,4,1,3,5]]]);